FROM ros:melodic-ros-core-bionic

RUN apt-get update -y \
    && apt-get install -y --no-install-recommends \
        gosu \
    && apt-get clean \
    && rm -rf /var/lib/apt/lists/*

RUN groupadd -r builder && \
    useradd -r -g builder -s /bin/bash -m builder

RUN apt-get update -y \
    && apt-get install -y --no-install-recommends \
        build-essential cmake \
    && apt-get clean \
    && rm -rf /var/lib/apt/lists/*

RUN apt-get update -y \
    && apt-get install -y --no-install-recommends \
        libeigen3-dev libgoogle-glog-dev \
    && apt-get clean \
    && rm -rf /var/lib/apt/lists/*

RUN apt-get update -y \
    && apt-get install -y --no-install-recommends \
        ros-melodic-cv-bridge ros-melodic-tf \
        ros-melodic-message-filters ros-melodic-image-transport \
    && apt-get clean \
    && rm -rf /var/lib/apt/lists/*
